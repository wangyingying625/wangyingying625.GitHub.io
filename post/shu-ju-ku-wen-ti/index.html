
<!DOCTYPE html>
<html lang="zh-CN">
<head>
 <meta name="viewport" content="width=device-width, initial-scale=1" />
<meta HTTP-EQUIV="pragma" CONTENT="no-cache"> 
<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate"> 
<meta HTTP-EQUIV="expires" CONTENT="0"> 
<title>数据库问题 | mldwyy</title>	

<link rel="stylesheet" href="https://wangyingying625.github.io/styles/main.css">
<script type="text/javascript">
function getCSS()
{
        datetoday = new Date();
        timenow=datetoday.getTime();
        datetoday.setTime(timenow);
        thehour = datetoday.getHours();

            display = "https://wangyingying625.github.io/media/css/night.css";

            display = "https://wangyingying625.github.io/media/css/night.css";   
      
            display = "https://wangyingying625.github.io/media/css/day.css";

            display = "https://wangyingying625.github.io/media/css/day.css";
      

var css = '<';
        css+='link rel="stylesheet" href='+display+' \/';
        css+='>';
        document.write(css);
}
</script>
<link href="https://fonts.googleapis.com/css?family=Dancing+Script|Noto+Sans+SC:300|Montserrat&display=swap" rel="stylesheet">
<link href="https://at.alicdn.com/t/font_1306644_jwtuc2zzbrd.css" rel="stylesheet" />
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<script type='text/javascript' src='https://wangyingying625.github.io/media/scripts/script.js'></script>
<link href="https://cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet" />
  <script src="https://cdn.bootcss.com/wow/1.1.2/wow.min.js"></script>
  <script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script>wow=new WOW({boxClass:'wow',animateClass:'animated',offset:0,mobile:true,live:true});wow.init();</script>

<script type="text/javascript">
window.onload=getCSS();
</script>


 	
</head>
<body class="post-template-default single single-post postid-70 single-format-standard">
    <div id="wrapper">
        
			
		<header id="header" class="site-header" 
		
		>
			<div class="site-branding">
									<h1 class="site-title"><a href="https://wangyingying625.github.io" rel="home">mldwyy</a></h1>
										
					<h2 class="site-description"></h2>
										
							</div>
			<nav id="nav-wrapper">
				<div class="container">
					<div class="nav-toggle">
						<div class="bars">
							<div class="bar"></div>
							<div class="bar"></div>
							<div class="bar"></div>
						</div>
					</div>
					<div class="clear"></div>
					<ul id="" class="dove">
		 
     			
<li>
	 
	<a  href="/"> 首页</a></li>
	
    
     			
<li>
	 
	<a  href="/archives"> 归档</a></li>
	
    
     			
<li>
	 
	<a  href="/tags"> 标签</a></li>
	
    
     			
<li>
	 
	<a  href="/post/about"> 关于</a></li>
	
    

</ul>
</li>		
		
</ul>				</div>
			</nav>
						<div class="jingge">


    

    

    

    

    

    

    

    

    

    

    

    
        </header>

		<div id="content" class="container">
			<div class="row">
	<div class="col-md-8 site-main">
				
<article id="post-70" class="post-70 post type-post status-publish format-standard hentry category-5 tag-10 tag-9 tag-11">

	
	                      
		<div class="entry-content">
			<h1 class="wow swing entry-title">数据库问题</h1>
<div class="entry-meta">
<div class="wow bounce">
	<i class="iconfont icon-rili"> <time class="lately-a" datetime="2021-03-07 17:16:27" itemprop="datePublished" pubdate="">2021-03-07</time></i>
	          </div>
			
</span>
													 
		</div>
                  
			<div class="wow slideInLeft entry-summary song">
				<h3 id="什么是数据库">什么是数据库?</h3>
<p>答:从本质上看,数据库就是信息的集合,这个集合能长期保存,可以共享并且有一定的数据结构</p>
<h3 id="什么是数据">什么是数据?</h3>
<p>答:数据是数据库中存储的基本对象.</p>
<h3 id="什么是数据库系统">什么是数据库系统:</h3>
<p>数据库系统是有数据库,数据,数据库管理系统和数据库管理员组成的系统</p>
<h3 id="什么是数据库管理系统dbms">什么是数据库管理系统(DBMS):</h3>
<h3 id="dbms有什么功能">DBMS有什么功能:</h3>
<ol>
<li>允许用户使用数据定义语言(DDL)建立新的数据库并定义它的模式(逻辑结构)</li>
<li>允许使用数据库操作语言(DML)和查询语言(QL)为用户提供查询和更新数据库的接口</li>
<li>控制多个用户的存取,一个用户对数据库的操作不影响另一个用户</li>
<li>支持大量数据的长期存储</li>
<li>在面对故障时能有恢复数据库的能力</li>
</ol>
<h3 id="dbms的功能要求dbms具备哪些结构">DBMS的功能要求DBMS具备哪些结构:</h3>
<ol>
<li>语法分析器:对用户提交的SQL语句进行语法分析</li>
<li>授权检查:检查尝试执行SQL语句的用户是否有权限执行它</li>
<li>查询分析和查询处理</li>
<li>访问管理:解决如何把表存储成磁盘中的文件流</li>
</ol>
<h3 id="什么是数据模型">什么是数据模型</h3>
<p>用来描述数据或者是信息的标记,一般由三部分组成</p>
<ol>
<li>数据结构</li>
<li>数据操作</li>
<li>完整性约束条件</li>
</ol>
<h3 id="关系数据模型有什么特点">关系数据模型有什么特点:</h3>
<p>关系数据模型把现实中的实体和实体间的联系都抽象成关系,即表.对关系操作的内容和结果都是表</p>
<h3 id="sql中的三种关系">SQL中的三种关系:</h3>
<ol>
<li>表:在物理磁盘中存储</li>
<li>视图:虚表,不在物理磁盘中存储其内容,只在数据库中存储其定义,需要内容时通过数据库中的表根据用户的需求映射</li>
<li>临时表:不在数据库中存储其内容也不在数据库中存储其定义,由SQL语句临时构造,在SQL语句执行完之后就被删除</li>
</ol>
<h3 id="如何建立一个关系型数据库">如何建立一个关系型数据库:</h3>
<p>建立数据库需要回答:存储什么信息;信息元素之间如何关联;需要有什么样的约束</p>
<ol>
<li>需求分析:考察数据库中可能涉及到的数据以及数据的特征,建立数据字典</li>
<li>概念设计:抽象实体,建立实体间联系,画出E-R图</li>
<li>逻辑设计:把E-R图转化为表</li>
<li>物理设计:设计数据库的存储结构及访问方法.考虑文件的存储形式和索引的建立.</li>
</ol>
<h3 id="什么是事务">什么是事务</h3>
<p>事务是对数据库操作的基本单位,本质上是一组SQL语句;<br>
事务具有原子性,原子性指的是SQL语句要么全部执行,要么一句也不执行<br>
事务具有一致性:数据库的一个状态经过一个事务运行到另外一个状态<br>
事务具有隔离性:并发执行的多个事务间互不干扰<br>
事务具有持久性:一个事务若成功执行,那它对数据库的影响就是永久的</p>
<p>引入事务的作用有:</p>
<ol>
<li>数据库异常时的恢复(根据数据库的更新策略不同采取的具体措施也不同,commit列表和active列表)</li>
<li>提供事务回滚,能让数据库从一个状态运行到另一个状态</li>
<li>多应用程序并发访问数据库时为这些程序提供隔离方法(加锁,两段锁协议能避免多用户并发访问数据库时发生冲突即事务可串行调度,加锁又可能让系统死锁,死锁的预防策略是一次封锁,等待死亡)</li>
</ol>
<h3 id="什么是死锁什么是活锁">什么是死锁,什么是活锁</h3>
<p>死锁:A申请B占有的排他锁;B也申请A占有的排他锁,导致两个事务都无法推进下去的情况<br>
活锁:A申请B占有的排他锁,B释放锁后给了C...A长期得不到锁</p>
<h3 id="预防死锁的策略">预防死锁的策略:</h3>
<ol>
<li>一次封锁发:任何事务执行前要求它获得所有需要的锁,如果不能获得全部需要的锁就不执行</li>
<li>等待死亡法:为每个事务增加一个时间戳属性,当事务A申请事务B的锁时,比较时间戳,若A比B年轻,事务A回滚,等待某一随机时间再用之前的时间戳申请;若A比B年老,事务A等待事务B释放锁</li>
</ol>
<h3 id="dbms查询优化的策略">DBMS查询优化的策略:</h3>
<ol>
<li>代数优化:DBMS对SQL语句形成的操作树进行处理:在查询结果不变的情况下尽量把一元操作往操作树的叶子部位压</li>
<li>操作优化:用最优的方式执行基本操作,最主要的是连接操作<br>
对连接操作的优化策略有:连接操作时每次从磁盘中取一个块的元组放进缓冲区,对被连接属性的比较在内存中计算,从而减少IO次数,减少连接操作耗时,本质上是用空间换时间.<br>
对连接属性添加B+树索引,有索引的表用做内循环,减少对连接属性的比较时间<br>
对连接属性按照hash映射存储,这样连接属性值相同的就在同一个hash块里,同样增加了对连接属性的比较时间</li>
</ol>
<h3 id="事务对数据库的更新策略有哪些">事务对数据库的更新策略有哪些</h3>
<ol>
<li>更改直接写进数据库:<br>
创建事务-&gt;将事务id写入active列表-&gt;把旧数据记入log-&gt;新数据把旧数据覆盖-&gt;事务id写入commit列表-&gt;事务id从active列表中删除<br>
重启动检查时,若发现事务id只在active列表中出现,那么对该事务进行undo(撤销)操作,回滚事务,然后从active列表删除其id;若事务id在active和commit列表都出现,说明该事务已经对数据库进行了修改,只是还没来得及从commit中删除其id就出了故障,那么只需从commit中删除其id;若只在commit中发现事务id证明事务已经顺利执行完,不做任何事.</li>
<li>更改在commit时写进数据库:<br>
创建事务-&gt;将事务id写入active列表-&gt;把新数据写入log-&gt;当数据写完需要commit时事务id写入commit-&gt;把log中数据写进数据库-&gt;事务id从active中删除<br>
重启检查时,若发现事务id只在active中,在active列表中删除其id<br>
若发现事务id在commit和active中,redo<br>
只在commit中找到,nothing to do</li>
<li>再新建一个进程,一旦磁盘空闲时,这个进程就开始搬数据<br>
创建事务-&gt;把其id写入active列表-&gt;把新数据写入log-&gt;同时如果磁盘空闲,同时把新数据写入数据库-&gt;事务id写入commit列表-&gt;commit事务前检查是否所有需要更爱的数据全部写入数据库-&gt;从active列表删除事务id<br>
重启检查时,若发现事务id只在active列表,undo并且删除active列表中的id<br>
若事务id同时出现在commit列表和active列表,redo<br>
事务id只在commit中,nothing to do</li>
</ol>
<h3 id="多事务并发时候可能会产生冲突这些冲突可能会造成什么影响">多事务并发时候可能会产生冲突,这些冲突可能会造成什么影响:</h3>
<ol>
<li>读写冲突--读脏数据:事务A改了数据1后事务B去读数据1,在事务B读完之后事务A执行异常回滚事务,导致事务B读取到了脏数据</li>
<li>读写冲突--不可重复读:事务A读完数据1后事务B对数据1进行了更改,事务A再次读数据1时和上次读到的不一致</li>
<li>写写冲突--丢失更新:事务A写了数据1还没来得及存回数据库时,事务B读取了数据1,也对其进行修改</li>
</ol>
<h3 id="如何解决这些冲突带来的影响如何让事务间的执行可串行化">如何解决这些冲突带来的影响(如何让事务间的执行可串行化):</h3>
<p>可串行化调度:计算机对并发执行事务的调度是随机的,在计算机中多个并发执行事务的结果是正确的当且仅当它的结果与按某一次序顺序执行时候的结果相同.<br>
加锁:</p>
<ol>
<li>X锁:X锁是排他锁,当对某一数据加了X锁之后其他事务无法再向该数据加锁</li>
<li>X+S锁:X锁排他,S锁不排他.当对某一数据加了S锁时,允许其他事务再对该数据加S锁,但不允许加X锁<br>
加了X锁的数据不允许其他事务对它加任何锁</li>
<li>X+S+U锁:U锁是考虑到对数据库的更改也分为读数据库和写数据库两步,当用户要修改数据库时先申请U锁,加了U锁的数据允许再加S锁,但不允许再加U和X锁</li>
</ol>
<h3 id="两段锁协议">两段锁协议:</h3>
<p>事务分为两个阶段:第一个阶段获得锁,在这个阶段事务可以申请获得任何数据上的任何锁<br>
第二个阶段是释放锁,在这个阶段事务不能再申请任何锁,只能释放锁<br>
若并发事务都遵守两段锁协议则对这些事务的任何并发调度都是可串行化的(是可串行化的策略,并不是避免死锁的)</p>
<h3 id="对数据库的安全性控制有哪些措施">对数据库的安全性控制有哪些措施:</h3>
<ol>
<li>用户身份鉴别:为用户设置密码</li>
<li>访问控制:对用户进行授权</li>
<li>数据加密:对敏感数据加密存储</li>
<li>审计追踪:对关键属性添加审计指令,这些数据就会被监视,当有操作在这些数据上时就会记录</li>
</ol>
<h3 id="为数据库定义约束的方法">为数据库定义约束的方法:</h3>
<ol>
<li>用断言定义: ASSERT ageRe on user:age&gt;0</li>
<li>定义表时用check子句:CREATE TABLE user(id INT,name VARCHAR(10),age INT)CHECK (age&gt;0)</li>
</ol>
<h3 id="常用的聚集函数">常用的聚集函数:</h3>
<ol>
<li>AVG</li>
<li>MIN</li>
<li>MAX</li>
<li>COUNT</li>
<li>SUM</li>
</ol>
<h3 id="group-by使用时的要求">GROUP BY使用时的要求:</h3>
<p>在select指定的字段要么要包含在Group By语句的后面，作为分组的依据；要么就要被包含在聚合函数中</p>
<h3 id="数据库设计中的各范式及其要求">数据库设计中的各范式及其要求:</h3>
<ol>
<li>1NF:强调列的原子性,即要求不能大表套小表</li>
<li>2NF:1NF+必须有主键+非主键的属性必须完全依赖于主键不能部分依赖</li>
<li>3NF:2NF+非主键必须直接依赖于主键不能传递依赖</li>
<li>BCNF:3NF+若属性A能决定属性B要求属性A必须是主键</li>
</ol>
<hr>
<h3 id="数据库系统的核心是什么">数据库系统的核心是什么?</h3>
<p>数据库管理系统</p>
<h3 id="数据库系统的核心和基础是什么">数据库系统的核心和基础是什么</h3>
<p>数据模型</p>

							</div>
	<div class="wow bounceInDown vt-post-tags">
 
				<a href="https://wangyingying625.github.io/tag/Ml4JS8axz/" rel="tag">数据库学习</a>	
				 
					</div>						
<nav class="navigation3 post-navigation3" role="navigation">
		
		<div class="nav-links3">
      
		<div class="wow bounceInLeft nav-previous3"><a href="https://wangyingying625.github.io/post/shu-ju-ku-si-wei-dao-tu/" rel="prev"> 数据库思维导图</a></div>
		 
		 
		<div class="wow bounceInRight nav-next3"><a href="https://wangyingying625.github.io/post/shu-ju-ku-she-ji/" rel="next"> 数据库设计</a></div>
		
		</div>
	</nav>
	<div class="wow rollIn author-info" style="visibility: visible; animation-name: rollIn;">
	<div class="author-avatar pull-left"><img src="https://wangyingying625.github.io/images/avatar.png" ></div>
 

	<p class="author-bio">Just do it</p></div></div>
	
		</div>
		
 
		
</article>

<div id="marlin_lite_about_widget-2" class="wow bounceInUp widget marlin_lite_about_widget" data-wow-delay="0.1s">
		
        
		<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://wangyingying625.github.io/media/scripts/Valine.min.js'></script>

<div class="comment"></div>
<script>
        new Valine({
            // AV 对象来自上面引入av-min.js(老司机们不要开车➳♡゛扎心了老铁)
            av: AV, 
            el: '.comment',
            lang: 'zh-cn',
            
            admin_email:'mldwyy233@gmail.com',
            
            
      emoticon_list: ["吐.png","喷血.png","狂汗.png","不说话.png","汗.png","坐等.png","献花.png","不高兴.png","中刀.png","害羞.png","皱眉.png","小眼睛.png","中指.png","尴尬.png","瞅你.png","想一想.png","中枪.png","得意.png","肿包.png","扇耳光.png","亲亲.png","惊喜.png","脸红.png","无所谓.png","便便.png","愤怒.png","蜡烛.png","献黄瓜.png","内伤.png","投降.png","观察.png","看不见.png","击掌.png","抠鼻.png","邪恶.png","看热闹.png","口水.png","抽烟.png","锁眉.png","装大款.png","吐舌.png","无奈.png","长草.png","赞一个.png","呲牙.png","无语.png","阴暗.png","不出所料.png","咽气.png","期待.png","高兴.png","吐血倒地.png","哭泣.png","欢呼.png","黑线.png","喜极而泣.png","喷水.png","深思.png","鼓掌.png","暗地观察.png"],
     	
      	
          
        });
    </script> 


   
  
 

		</div>

			</div>
			


<div class="tocc col l3 hide-on-med-and-down">
	
        <div class="toc-widget">
			
            <div class="toc-title"></div>
			
            <div id="toc-content">
			
			
			</div>
        </div>
    </div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.5.0/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '.entry-summary',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('.entry-summary').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });
</script>										 

 
       


			</div>
		</div>

		
		 	<footer id="colophon" class="site-footer">

			<div class="container">
	
				<div class="copyright">Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a><br>Theme:   <a href="https://github.com/alterfang/gridea-theme-pan" target="_blank" title="Pan"><span>Pan</span></a>. Powered by <a href="https://gridea.dev/" target="_blank" title="Gridea"><span>Gridea</span></a></div>		
			</div>
		
		</footer>

</div>

<script src="https://cdn.bootcss.com/fitvids/1.2.0/jquery.fitvids.min.js"></script>
<script type='text/javascript' src='https://wangyingying625.github.io/media/scripts/marlin-scripts.js'></script>
 <script src="//tokinx.github.io/lately/lately.min.js"></script>
  <script>jQuery(document).ready(function(){$.lately({'target':'.lately-a,.lately-b,.lately-c'})});</script>
  <style type="text/css">a.back_to_top {
    text-decoration: none;
    position: fixed;
    bottom: 40px;
    right: 30px;
    background: #f0f0f0;
    height: 40px;
    width: 40px;
    border-radius: 50%;
    line-height: 36px;
    font-size: 18px;
    text-align: center;
    transition-duration: .5s;
    transition-propety: background-color;
    display: none;
}

a.back_to_top span {
    color: #888;
}

a.back_to_top:hover {
    cursor: pointer;
    background: #dfdfdf;
}

a.back_to_top:hover span {
    color: #555;
}

@media print, screen and (max-width: 580px) {
    .back_to_top {
        display: none !important;
    }
}



</style><a id="back_to_top" href="#" class="back_to_top"><span><i class="iconfont icon-xiangshang"></i></span>
</a>


<script>$(document).ready((function(_this) {
  return function() {
    var bt;
    bt = $('#back_to_top');
    if ($(document).width() > 480) {
      $(window).scroll(function() {
        var st;
        st = $(window).scrollTop();
        if (st > 30) {
          return bt.css('display', 'block');
        } else {
          return bt.css('display', 'none');
        }
      });
      return bt.click(function() {
        $('body,html').animate({
          scrollTop: 0
        }, 800);
        return false;
      });
    }
  };
})(this));
</script>

		<script data-no-instant>
    (function ($) {
        $.extend({
            adamsOverload: function () {
                $('.navigation:eq(0)').remove();
                $("").attr("rel" , "external");
                $("a[rel='external'],a[rel='external nofollow']").attr("target","_blank");
                $("a.vi").attr("rel" , "");
                $.viewImage({
                    'target'  : 'img',
                    'exclude' : '.vsmile-icons img,.gallery img',
                    'delay'   : 300
                });
                $.lately({
                    'target' : '.commentmetadata a,.infos time,.post-list time'
                });
                prettyPrint();
                
                $('ul.links li a').each(function(){
                    if($(this).parent().find('.bg').length==0){
                        $(this).parent().append('<!---<div class="bg" style="background-image:url(https://c3.glgoo.top/s2/favicons?domain='+$(this).attr("href")+')"></div>--->')
                    }
                });
            }
        });
    })(jQuery);
    jQuery.adamsOverload();
</script>

</body>
</html>
